const header=document.querySelector(".header"),footer=document.querySelector(".footer"),iconMenu=document.querySelector(".icon-menu"),modal=document.querySelectorAll(".modal"),successModal=document.querySelector(".success-mod"),errorModal=document.querySelector(".error-mod"),cookiePopup=document.querySelector("#cookie-popup");let animSpd=400,bp={largeDesktop:1550.98,desktop:1250.98,laptop:1023.98,tablet:767.98,phone:575.98};function scrollPos(){return window.scrollY||window.pageYOffset||document.documentElement.scrollTop}function isPhone(e){return!!e.match(/^\+7 \d{3} \d{3}-\d{2}-\d{2}$/)}function maskEmail(e){const[t,o]=e.split("@");let n="";return n=t.length<=3?t.substring(0,1)+"***":t.substring(0,2)+"***"+t.substring(t.length-1),n+"@"+o}function checkIOS(){let e=navigator.platform,t=navigator.userAgent;return/(iPhone|iPod|iPad)/i.test(e)||"MacIntel"===e&&navigator.maxTouchPoints>1&&!window.MSStream||/iPad|iPhone|iPod/.test(t)&&!window.MSStream}let isIOS=checkIOS();function enableScroll(){if(!document.querySelector(".modal.open")&&(document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll"),isIOS)){document.body.style.position="",document.body.style.top="",document.body.style.width="";let e=document.body.dataset.scrollY;window.scrollTo(0,parseInt(e||"0"))}}function disableScroll(){if(!document.querySelector(".modal.open")){let e=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0;if(document.querySelector(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.body.classList.add("no-scroll"),isIOS){let e=window.scrollY;document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${e}px`,document.body.dataset.scrollY=e}}}function smoothDrop(e,t,o=!1){let n=o||500;if(t.style.overflow="hidden",t.style.transition=`height ${n}ms ease`,t.style["-webkit-transition"]=`height ${n}ms ease`,e.classList.contains("active")){e.parentNode.classList.remove("active");let o=t.clientHeight+"px";t.style.height=o,setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active"),e.setAttribute("aria-expanded",!1)}),n)}),0)}else{e.parentNode.classList.add("active"),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active"),e.setAttribute("aria-expanded",!0)}),n)}),0)}}const customScroll=document.querySelectorAll(".custom-scroll");let isFirefox="undefined"!=typeof InstallTrigger;isFirefox&&(document.documentElement.style.scrollbarColor="#131313 transparent",customScroll.length&&customScroll.forEach((e=>{e.style.scrollbarColor="#131313 transparent"})));const anchorLinks=document.querySelectorAll(".js-anchor");function openModal(e){let t=document.querySelector(".modal.open");disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.querySelector("video")&&e.querySelectorAll("video").forEach((e=>e.pause())),e.classList.remove("open"),setTimeout((()=>{enableScroll()}),animSpd)}function modalShowBtns(){const e=document.querySelectorAll(".mod-open-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");openModal(document.getElementById(o))}))}))}function modalUnshowBtns(){const e=document.querySelectorAll(".mod-close-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");closeModal(document.getElementById(o))}))}))}function setSuccessTxt(e=!1,t=!1,o=!1){successModal.querySelector("h2").textContent=e||"Заявка отправлена",successModal.querySelector(".main-btn span").textContent=o||"Закрыть",successModal.querySelector("p").textContent=t||"Я свяжусь c Вами в течение 15 минут"}function setErrorTxt(e=!1,t=!1,o=!1){errorModal.querySelector("h2").textContent=e||"Что-то пошло не так",errorModal.querySelector(".main-btn span").textContent=o||"Закрыть",errorModal.querySelector("p").textContent=t||"Попробуйте еще раз"}function openSuccessMod(e=!1,t=!1,o=!1){setSuccessTxt(e,t,o),openModal(successModal)}function openErrorMod(e=!1,t=!1,o=!1){setErrorTxt(e,t,o),openModal(errorModal)}function formReset(e){e.querySelectorAll(".item-form").length>0&&e.querySelectorAll(".item-form").forEach((e=>e.classList.remove("error"))),e.querySelectorAll(".item-form__reset").length>0&&e.querySelectorAll(".item-form__reset").forEach((e=>e.classList.remove("show"))),e.querySelectorAll("input").forEach((e=>{["hidden","checkbox","radio"].includes(e.type)||(e.value=""),["checkbox","radio"].includes(e.type)&&!e.classList.contains("required")&&(e.checked=!1)})),e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector(".file-form__items")&&(e.querySelector(".file-form__items").innerHTML="")}function showResetBtn(e,t){e.querySelector("input").value.length>0?t.classList.add("show"):t.classList.remove("show")}anchorLinks.length&&anchorLinks.forEach((e=>{e.addEventListener("click",(t=>{let o=e.getAttribute("href").indexOf("#");const n=e.getAttribute("href").substring(o);let c=document.querySelector(n);if(c){t.preventDefault();let e=c.getBoundingClientRect().top-header.clientHeight-10;iconMenu.classList.contains("active")?(iconMenu.click(),setTimeout((()=>{window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}),300)):window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}}))})),modal.length&&modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)||closeModal(e)})),e.querySelectorAll(".modal__close").forEach((t=>{t.addEventListener("click",(()=>{closeModal(e)}))}))})),modalShowBtns(),modalUnshowBtns();const itemForm=document.querySelectorAll(".item-form");itemForm&&itemForm.forEach((e=>{const t=e.querySelector(".item-form__reset");t&&(showResetBtn(e,t),e.querySelector("input").addEventListener("input",(o=>{showResetBtn(e,t)})),t.addEventListener("click",(o=>{o.preventDefault(),e.querySelector("input").value="",t.classList.remove("show")})))}));const inpTel=document.querySelectorAll("input[type=tel]");inpTel.length&&inpTel.forEach((e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)}));const accordion=document.querySelectorAll(".accordion");accordion.length&&accordion.forEach((e=>{e.querySelector(".accordion__header").addEventListener("click",(()=>{e.classList.contains("no-close")||e.parentNode.parentNode.querySelectorAll(".accordion").forEach((t=>{if(t.querySelector(".accordion__header").classList.contains("active")&&(smoothDrop(t.querySelector(".accordion__header"),t.querySelector(".accordion__body")),t.getBoundingClientRect().top<0)){let o=scrollPos()+e.getBoundingClientRect().top-t.querySelector(".accordion__body").clientHeight-header.clientHeight-10;window.scrollTo(0,o)}})),smoothDrop(e.querySelector(".accordion__header"),e.querySelector(".accordion__body"))}))}));const intro=document.querySelector(".intro"),fixedBtn=document.querySelector(".fixed-btn");let fixedBtnTimeout;function fixedBtnVisibility(){clearTimeout(fixedBtnTimeout),fixedBtnTimeout=setTimeout((()=>{intro.getBoundingClientRect().bottom<0&&window.innerHeight-footer.getBoundingClientRect().bottom+50<0?(fixedBtn.classList.add("show"),cookiePopup&&cookiePopup.classList.add("fixed-btn-isVisible")):(fixedBtn.classList.remove("show"),cookiePopup&&cookiePopup.classList.remove("fixed-btn-isVisible"))}),100)}intro&&fixedBtn&&(fixedBtnVisibility(),window.addEventListener("scroll",fixedBtnVisibility));const headerNav=document.querySelector(".header__nav");iconMenu&&headerNav&&(iconMenu.addEventListener("click",(()=>{iconMenu.classList.contains("active")?(iconMenu.setAttribute("aria-expanded",!1),iconMenu.setAttribute("aria-label","Открыть меню"),iconMenu.classList.remove("active"),headerNav.classList.remove("open"),enableScroll()):(iconMenu.setAttribute("aria-label","Закрыть меню"),iconMenu.classList.add("active"),headerNav.classList.add("open"),disableScroll())})),window.addEventListener("resize",(()=>{window.innerWidth>bp.desktop&&iconMenu.classList.contains("active")&&iconMenu.click()})));const pageUp=document.querySelector(".page-up");function showCookie(){cookiePopup&&(cookiePopup.classList.add("show"),cookiePopup.setAttribute("aria-hidden","false"))}function unshowCookie(){cookiePopup&&(cookiePopup.classList.remove("show"),setTimeout((()=>{cookiePopup.remove()}),300))}pageUp&&pageUp.addEventListener("click",(()=>window.scrollTo({top:0,behavior:"smooth"})));let COOKIE_NAME="site_cookie_consent",COOKIE_VALUE="accepted",COOKIE_DAYS=365;function setCookie(){const e=new Date;e.setTime(e.getTime()+24*COOKIE_DAYS*60*60*1e3);const t="expires="+e.toUTCString(),o=location.hostname.replace(/^www\./,""),n=o.includes(".")?`; domain=.${o}`:"";let c=`${COOKIE_NAME}=${encodeURIComponent(COOKIE_VALUE)}; ${t}; path=/; SameSite=Lax${n}`;"https:"===location.protocol&&(c+="; Secure"),document.cookie=c}function hasCookieAccepted(){try{if(localStorage.getItem(COOKIE_NAME)===COOKIE_VALUE)return!0}catch(e){}const e=document.cookie.split("; ").find((e=>e.startsWith(COOKIE_NAME+"=")))?.split("=")[1];return decodeURIComponent(e||"")===COOKIE_VALUE}if(window.addEventListener("DOMContentLoaded",(()=>{cookiePopup&&(hasCookieAccepted()?unshowCookie():showCookie())})),AOS.init({duration:700,once:!0}),footer){new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&footer.classList.add("animate")}))}),{threshold:.5,rootMargin:"0px"}).observe(footer)}